<div class="show container">

<p id="notice"><%= notice %></p>

<h1>Rooms</h1>

<div class="media">
  <div class="media-body">
    <div class="media-section">
      <h2>Awesome homes near Disneyland</h2>
    </div>
    <div class="media-section">
      <p>Here you can navigate on our staff favourite places</p>
    </div>
  </div>

<p>New <%= link_to "#new", rooms_path %></p>
<p> Edit <%= link_to "#edit", rooms_path %> </p>
<p> Show <%= link_to "#show", rooms_path %> </p>


  <div class="container">

    <div class="row">
      <div class="col-xs-12 col-md-8 col-sm-8">
        <div class="form-inline padded">
              <%= simple_form_for :search, url: rooms_path, method: :get, remote: true do |f| %>
              <%= f.input :address, placeholder: 'What to put here?', label: false %>
              <%= f.input :date, as: :date, label: false%>
              <%= f.submit class: 'btn btn-primary' %>
            <% end %>
        </div>
        <% @rooms.each do |a| %>
          <%= render "room_card", room: a %>
        <% end %>
      </div>

      <div class="col-xs-12 col-md-4 col-sm-4">
        <div class="map-container">
          <div id="map" style="position: fixed">
      </div>

    </div>

  </div>

</div>


<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var styles = [
    {
        "featureType": "all",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "black"
            }
        ]
    },
    {
        "featureType": "landscape",
        "stylers": [
            {
                "color": "#f9ddc5"
            },
            {
                "lightness": -7
            }
        ]
    },
    {
        "featureType": "road",
        "stylers": [
            {
                "color": "black"
            },
            {
                "lightness": 43
            }
        ]
    },
    {
        "featureType": "poi.business",
        "stylers": [
            {
                "color": "#645c20"
            },
            {
                "lightness": 38
            }
        ]
    },
    {
        "featureType": "water",
        "stylers": [
            {
                "color": "#1994bf"
            },
            {
                "saturation": -69
            },
            {
                "gamma": 0.99
            },
            {
                "lightness": 43
            }
        ]
    },
    {
        "featureType": "road.local",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "black"
            },
            {
                "weight": 1.3
            },
            {
                "visibility": "on"
            },
            {
                "lightness": 16
            }
        ]
    },
    {
        "featureType": "poi.business"
    },
    {
        "featureType": "poi.park",
        "stylers": [
            {
                "color": "#645c20"
            },
            {
                "lightness": 39
            }
        ]
    },
    {
        "featureType": "poi.school",
        "stylers": [
            {
                "color": "#a95521"
            },
            {
                "lightness": 35
            }
        ]
    },
    {},
    {
        "featureType": "poi.medical",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#813033"
            },
            {
                "lightness": 38
            },
            {
                "visibility": "off"
            }
        ]
    },
    {},
    {},
    {},
    {},
    {},
    {},
    {},
    {},
    {},
    {},
    {},
    {
        "elementType": "labels"
    },
    {
        "featureType": "poi.sports_complex",
        "stylers": [
            {
                "color": "#9e5916"
            },
            {
                "lightness": 32
            }
        ]
    },
    {},
    {
        "featureType": "poi.government",
        "stylers": [
            {
                "color": "#9e5916"
            },
            {
                "lightness": 46
            }
        ]
    },
    {
        "featureType": "transit.station",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit.line",
        "stylers": [
            {
                "color": "#813033"
            },
            {
                "lightness": 22
            }
        ]
    },
    {
        "featureType": "transit",
        "stylers": [
            {
                "lightness": 38
            }
        ]
    },
    {
        "featureType": "road.local",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "color": "#f19f53"
            },
            {
                "lightness": -10
            }
        ]
    },
    {},
    {},
    {}
]
      var handler = Gmaps.build('Google');
      handler.buildMap({
        provider: {
          styles: styles
        },

        internal: { id: 'map' } }, function() {

          markers = handler.addMarkers(<%= raw @hash.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
          if (markers.length == 0) {
            handler.getMap().setZoom(2);
          } else if (markers.length == 1) {
            handler.getMap().setZoom(14);
          }
        });
    });
  <% end %>
<% end %>


